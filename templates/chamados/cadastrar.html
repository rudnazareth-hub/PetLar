{% extends "base_privada.html" %}
{% from "macros/form_fields.html" import field with context %}

{% block titulo %}Abrir Chamado{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col-12">
            <!-- Cabeçalho -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2><i class="bi bi-headset"></i> Abrir Novo Chamado</h2>
            </div>

            <!-- Informações -->
            <div class="alert alert-info mb-4" role="alert">
                <i class="bi bi-info-circle"></i>
                <strong>Antes de abrir um chamado:</strong>
                <ul class="mb-0 mt-2">
                    <li>Descreva seu problema ou dúvida de forma clara e detalhada</li>
                    <li>Informe a prioridade adequada para ajudar na organização</li>
                    <li>Nossa equipe responderá o mais breve possível</li>
                </ul>
            </div>

            <!-- Formulário de Cadastro -->
            <div class="card shadow-sm">
                <form method="post" action="/chamados/cadastrar">
                    <div class="card-body p-4">
                        <div class="row">
                            <div class="col-12">
                                {% include "components/alerta_erro.html" %}
                            </div>

                            <div class="col-12 mb-3">
                                {{ field(name='titulo', label='Título', type='text', required=true,
                                placeholder='Descreva brevemente o problema ou dúvida',
                                help_text='Título curto e objetivo (10-200 caracteres)',
                                attributes={'maxlength': 200}) }}
                            </div>

                            <div class="col-12 mb-3">
                                {{ field(name='descricao', label='Descrição Detalhada', type='textarea', rows=6,
                                required=true,
                                placeholder='Descreva detalhadamente seu problema, incluindo passos para reproduzir, mensagens de erro, etc.',
                                help_text='Forneça o máximo de detalhes possível (20-2000 caracteres)',
                                attributes={'maxlength': 2000}) }}
                            </div>

                            <div class="col-12">
                                {{ field(
                                    name='prioridade',
                                    label='Prioridade',
                                    type='select',
                                    required=true,
                                    options={
                                        'Baixa': 'Baixa - Não urgente',
                                        'Média': 'Média - Normal',
                                        'Alta': 'Alta - Importante',
                                        'Urgente': 'Urgente - Crítico'
                                    },
                                    help_text='Selecione a prioridade do seu chamado',
                                    wrapper_class='mb-0'
                                ) }}
                            </div>
                        </div>
                    </div>
                    <div class="card-footer p-4">
                        <div class="d-flex gap-3">
                            <button type="submit" class="btn btn-success">
                                <i class="bi bi-send"></i> Abrir Chamado
                            </button>
                            <a href="/chamados/listar" class="btn btn-secondary">
                                <i class="bi bi-x-circle"></i> Cancelar
                            </a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
