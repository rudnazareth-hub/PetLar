<!-- Modal de Confirmação Versátil -->
<div class="modal fade" id="modalConfirmacaoExclusao" tabindex="-1" aria-labelledby="modalConfirmacaoLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header" id="modalConfirmacaoHeader">
                <h5 class="modal-title" id="modalConfirmacaoLabel">
                    <i class="bi bi-exclamation-triangle" id="modalConfirmacaoIcon"></i>
                    <span id="modalConfirmacaoTitulo">Confirmar Ação</span>
                </h5>
                <button type="button" class="btn-close" id="modalConfirmacaoBtnClose" data-bs-dismiss="modal" aria-label="Fechar"></button>
            </div>
            <div class="modal-body">
                <div class="alert" id="modalConfirmacaoAlerta">
                    <i class="bi bi-exclamation-triangle-fill"></i>
                    <strong>Atenção!</strong> <span id="modalConfirmacaoAvisoTexto">Esta ação não pode ser desfeita.</span>
                </div>

                <p id="modalConfirmacaoMensagem" class="mb-0">
                    Tem certeza que deseja realizar esta ação?
                </p>

                <!-- Área para conteúdo adicional (opcional) -->
                <div id="modalConfirmacaoDetalhes" class="mt-3"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="bi bi-x-circle"></i> Cancelar
                </button>
                <form id="formConfirmacaoExclusao" method="POST" action="" class="d-inline">
                    <button type="submit" class="btn" id="modalConfirmacaoBtnAcao">
                        <i class="bi bi-check-circle" id="modalConfirmacaoBtnIcon"></i>
                        <span id="modalConfirmacaoBtnTexto">Confirmar</span>
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
/**
 * Função para abrir o modal de confirmação versátil
 *
 * @param {Object} config - Configuração do modal
 * @param {string} config.url - URL de ação do formulário
 * @param {string} config.mensagem - Mensagem de confirmação
 * @param {string} [config.detalhes] - HTML com detalhes do item (opcional)
 * @param {string} [config.tipo='danger'] - Tipo da ação: 'danger' (vermelho/exclusão) ou 'warning' (amarelo/restauração)
 * @param {string} [config.titulo] - Título customizado do modal
 * @param {string} [config.icone] - Classe do ícone do título (ex: 'bi-trash', 'bi-arrow-clockwise')
 * @param {string} [config.btnTexto] - Texto do botão de confirmação
 * @param {string} [config.btnIcone] - Classe do ícone do botão
 * @param {string} [config.avisoTexto] - Texto customizado do aviso
 *
 * @example
 * // Exemplo de uso para exclusão (padrão)
 * abrirModalConfirmacao({
 *     url: '/admin/usuarios/excluir/1',
 *     mensagem: 'Tem certeza que deseja excluir este usuário?',
 *     detalhes: '<code>joao@email.com</code>'
 * });
 *
 * @example
 * // Exemplo de uso para restauração
 * abrirModalConfirmacao({
 *     url: '/admin/backups/restaurar/backup.db',
 *     tipo: 'warning',
 *     titulo: 'Confirmar Restauração',
 *     icone: 'bi-arrow-clockwise',
 *     mensagem: 'ATENÇÃO: Esta operação irá sobrescrever o banco de dados atual!',
 *     detalhes: '<code>backup_2025-10-22.db</code>',
 *     btnTexto: 'Restaurar Backup',
 *     btnIcone: 'bi-arrow-clockwise',
 *     avisoTexto: 'Um backup de segurança será criado automaticamente antes da restauração.'
 * });
 */
function abrirModalConfirmacao(config) {
    const modal = document.getElementById('modalConfirmacaoExclusao');
    const form = document.getElementById('formConfirmacaoExclusao');
    const header = document.getElementById('modalConfirmacaoHeader');
    const titulo = document.getElementById('modalConfirmacaoTitulo');
    const icone = document.getElementById('modalConfirmacaoIcon');
    const btnClose = document.getElementById('modalConfirmacaoBtnClose');
    const alerta = document.getElementById('modalConfirmacaoAlerta');
    const avisoTexto = document.getElementById('modalConfirmacaoAvisoTexto');
    const mensagem = document.getElementById('modalConfirmacaoMensagem');
    const detalhes = document.getElementById('modalConfirmacaoDetalhes');
    const btnAcao = document.getElementById('modalConfirmacaoBtnAcao');
    const btnIcone = document.getElementById('modalConfirmacaoBtnIcon');
    const btnTexto = document.getElementById('modalConfirmacaoBtnTexto');

    // Configura a URL de ação
    form.action = config.url;

    // Configura o tipo (danger ou warning)
    const tipo = config.tipo || 'danger';
    const isDanger = tipo === 'danger';

    // Configura o header
    header.className = isDanger ? 'modal-header bg-danger text-white' : 'modal-header bg-warning text-dark';
    btnClose.className = isDanger ? 'btn-close btn-close-white' : 'btn-close';

    // Configura o título e ícone
    titulo.textContent = config.titulo || (isDanger ? 'Confirmar Exclusão' : 'Confirmar Ação');
    icone.className = config.icone || 'bi bi-exclamation-triangle';

    // Configura o alerta
    alerta.className = isDanger ? 'alert alert-warning' : 'alert alert-success border-success';
    avisoTexto.textContent = config.avisoTexto || (isDanger ? 'Esta ação não pode ser desfeita.' : 'Esta operação requer confirmação.');

    // Configura a mensagem
    mensagem.textContent = config.mensagem || 'Tem certeza que deseja realizar esta ação?';

    // Configura os detalhes (se fornecidos)
    if (config.detalhes) {
        detalhes.innerHTML = config.detalhes;
        detalhes.style.display = 'block';
    } else {
        detalhes.innerHTML = '';
        detalhes.style.display = 'none';
    }

    // Configura o botão de ação
    btnAcao.className = isDanger ? 'btn btn-danger' : 'btn btn-warning';
    btnIcone.className = config.btnIcone || (isDanger ? 'bi bi-trash' : 'bi bi-check-circle');
    btnTexto.textContent = config.btnTexto || (isDanger ? 'Confirmar Exclusão' : 'Confirmar');

    // Abre o modal
    const bsModal = new bootstrap.Modal(modal);
    bsModal.show();
}
</script>
