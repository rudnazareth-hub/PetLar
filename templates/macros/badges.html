{#
    Macros Reutilizáveis de Badges

    Este arquivo contém macros para renderizar badges com cores e estilos consistentes
    em todo o sistema. Use estes macros ao invés de criar badges manualmente.

    Exemplo de uso:
    {% from 'macros/badges.html' import badge_status_chamado, badge_prioridade, badge_perfil %}

    {{ badge_status_chamado(chamado.status) }}
    {{ badge_prioridade(chamado.prioridade) }}
    {{ badge_perfil(usuario.perfil) }}
#}

{% macro badge_status_chamado(status) %}
    {#
        Badge para status de chamado

        Args:
            status: String ou Enum com o status ('Aberto', 'Em Análise', 'Resolvido', 'Fechado')

        Cores:
            - Aberto: primary (azul)
            - Em Análise: info (ciano)
            - Resolvido: success (verde)
            - Fechado: secondary (cinza)
    #}
    {% set status_str = status.value if status.value is defined else status %}
    {% if status_str == 'Aberto' %}
        {% set cor = 'primary' %}
    {% elif status_str == 'Em Análise' %}
        {% set cor = 'info' %}
    {% elif status_str == 'Resolvido' %}
        {% set cor = 'success' %}
    {% elif status_str == 'Fechado' %}
        {% set cor = 'secondary' %}
    {% else %}
        {% set cor = 'secondary' %}
    {% endif %}
    <span class="badge bg-{{ cor }}">{{ status_str }}</span>
{% endmacro %}

{% macro badge_prioridade(prioridade) %}
    {#
        Badge para prioridade

        Args:
            prioridade: String ou Enum com a prioridade ('Urgente', 'Alta', 'Média', 'Baixa')

        Cores:
            - Urgente: danger (vermelho)
            - Alta: warning (amarelo)
            - Média: info (ciano)
            - Baixa: secondary (cinza)
    #}
    {% set prio_str = prioridade.value if prioridade.value is defined else prioridade %}
    {% if prio_str == 'Urgente' %}
        {% set cor = 'danger' %}
    {% elif prio_str == 'Alta' %}
        {% set cor = 'warning text-dark' %}
    {% elif prio_str == 'Média' %}
        {% set cor = 'info' %}
    {% elif prio_str == 'Baixa' %}
        {% set cor = 'secondary' %}
    {% else %}
        {% set cor = 'secondary' %}
    {% endif %}
    <span class="badge bg-{{ cor }}">{{ prio_str }}</span>
{% endmacro %}

{% macro badge_perfil(perfil) %}
    {#
        Badge para perfil de usuário

        Args:
            perfil: String com o perfil ('Administrador', 'Vendedor', 'Cliente')

        Cores:
            - Administrador: danger (vermelho)
            - Vendedor: warning (amarelo)
            - Cliente: info (ciano)
    #}
    {% if perfil == 'Administrador' %}
        {% set cor = 'danger' %}
    {% elif perfil == 'Vendedor' %}
        {% set cor = 'warning text-dark' %}
    {% else %}
        {% set cor = 'info' %}
    {% endif %}
    <span class="badge bg-{{ cor }}">{{ perfil }}</span>
{% endmacro %}

{% macro badge_mensagens_nao_lidas(count) %}
    {#
        Badge para contador de mensagens não lidas

        Args:
            count: Número inteiro de mensagens não lidas

        Exibe apenas se count > 0
    #}
    {% if count > 0 %}
    <span class="badge bg-warning text-dark">
        <i class="bi bi-envelope-fill"></i>
        {{ count }} não lida{% if count > 1 %}s{% endif %}
    </span>
    {% endif %}
{% endmacro %}

{% macro badge(texto, cor='secondary', icon=none) %}
    {#
        Badge genérico com cor e ícone customizáveis

        Args:
            texto: Texto a ser exibido no badge
            cor: Cor do Bootstrap (primary, secondary, success, danger, warning, info, light, dark)
            icon: Nome do ícone Bootstrap Icons (opcional, sem o prefixo 'bi-')

        Exemplo:
            {{ badge('Novo', 'success', 'star-fill') }}
            {{ badge('Pendente', 'warning') }}
    #}
    <span class="badge bg-{{ cor }}">
        {% if icon %}<i class="bi bi-{{ icon }}"></i> {% endif %}{{ texto }}
    </span>
{% endmacro %}

{% macro badge_booleano(valor, texto_true='Sim', texto_false='Não', cor_true='success', cor_false='secondary') %}
    {#
        Badge para valores booleanos

        Args:
            valor: Valor booleano
            texto_true: Texto quando verdadeiro (padrão: 'Sim')
            texto_false: Texto quando falso (padrão: 'Não')
            cor_true: Cor quando verdadeiro (padrão: 'success')
            cor_false: Cor quando falso (padrão: 'secondary')

        Exemplo:
            {{ badge_booleano(usuario.ativo, 'Ativo', 'Inativo') }}
    #}
    {% if valor %}
        <span class="badge bg-{{ cor_true }}">{{ texto_true }}</span>
    {% else %}
        <span class="badge bg-{{ cor_false }}">{{ texto_false }}</span>
    {% endif %}
{% endmacro %}
