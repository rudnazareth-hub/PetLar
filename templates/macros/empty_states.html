{#
    Macros Reutilizáveis de Estados Vazios

    Este arquivo contém macros para renderizar mensagens de estado vazio (empty states)
    quando não há dados para exibir em listagens ou seções.

    Exemplo de uso:
    {% from 'macros/empty_states.html' import empty_state %}

    {% if not tarefas %}
        {{ empty_state(
            'Nenhuma tarefa cadastrada',
            'Você ainda não possui tarefas cadastradas. Clique no botão abaixo para começar!',
            action_url='/tarefas/cadastrar',
            action_text='Cadastrar Primeira Tarefa'
        ) }}
    {% endif %}
#}

{% macro empty_state(
    title,
    message,
    action_url='',
    action_text='',
    icon='info-circle',
    variant='info',
    show_icon=true
) %}
    {#
        Estado vazio com mensagem e ação opcional

        Args:
            title: Título da mensagem
            message: Texto descritivo da mensagem
            action_url: URL do botão de ação (opcional)
            action_text: Texto do botão de ação (opcional)
            icon: Nome do ícone Bootstrap Icons (sem o prefixo 'bi-')
            variant: Variante do Bootstrap (info, warning, success, danger)
            show_icon: Mostrar ícone no título (padrão: true)

        Variantes comuns:
            - info: Estado neutro (padrão)
            - warning: Atenção necessária
            - success: Estado positivo
            - danger: Estado crítico

        Exemplo básico:
            {{ empty_state(
                'Nenhum resultado encontrado',
                'Não encontramos itens que correspondem aos seus critérios de busca.'
            ) }}

        Exemplo com ação:
            {{ empty_state(
                'Nenhuma tarefa cadastrada',
                'Comece criando sua primeira tarefa!',
                action_url='/tarefas/cadastrar',
                action_text='Nova Tarefa',
                icon='clipboard-x'
            ) }}
    #}
<div class="alert alert-{{ variant }}" role="alert">
    <h4 class="alert-heading">
        {% if show_icon %}<i class="bi bi-{{ icon }}"></i> {% endif %}{{ title }}
    </h4>
    <p class="mb-0">{{ message }}</p>
    {% if action_url and action_text %}
    <hr>
    <a href="{{ action_url }}" class="btn btn-{{ 'primary' if variant == 'info' else variant }}">
        <i class="bi bi-plus-circle"></i> {{ action_text }}
    </a>
    {% endif %}
</div>
{% endmacro %}

{% macro empty_search_result(search_term='', back_url='') %}
    {#
        Estado vazio específico para resultados de busca

        Args:
            search_term: Termo pesquisado (opcional)
            back_url: URL para voltar/limpar busca (opcional)

        Exemplo:
            {{ empty_search_result('Python', '/tarefas/listar') }}
    #}
<div class="alert alert-warning" role="alert">
    <h4 class="alert-heading">
        <i class="bi bi-search"></i> Nenhum resultado encontrado
    </h4>
    <p class="mb-0">
        {% if search_term %}
            Não encontramos resultados para <strong>"{{ search_term }}"</strong>.
        {% else %}
            Não encontramos resultados que correspondam aos seus critérios de busca.
        {% endif %}
    </p>
    <p class="mb-0 mt-2">
        <small>
            Tente:
            <ul class="mb-0">
                <li>Verificar a ortografia dos termos de busca</li>
                <li>Usar palavras-chave diferentes ou mais genéricas</li>
                <li>Remover filtros aplicados</li>
            </ul>
        </small>
    </p>
    {% if back_url %}
    <hr>
    <a href="{{ back_url }}" class="btn btn-warning">
        <i class="bi bi-arrow-left"></i> Voltar
    </a>
    {% endif %}
</div>
{% endmacro %}

{% macro empty_filtered_result(filter_description='', clear_url='') %}
    {#
        Estado vazio para listagens filtradas sem resultados

        Args:
            filter_description: Descrição dos filtros aplicados (opcional)
            clear_url: URL para limpar filtros (opcional)

        Exemplo:
            {{ empty_filtered_result('Status: Aberto', '/chamados/listar') }}
    #}
<div class="alert alert-warning" role="alert">
    <h4 class="alert-heading">
        <i class="bi bi-funnel"></i> Nenhum item encontrado com os filtros aplicados
    </h4>
    <p class="mb-0">
        {% if filter_description %}
            Não há itens que correspondam ao filtro: <strong>{{ filter_description }}</strong>
        {% else %}
            Não há itens que correspondam aos filtros aplicados.
        {% endif %}
    </p>
    {% if clear_url %}
    <hr>
    <a href="{{ clear_url }}" class="btn btn-warning">
        <i class="bi bi-x-circle"></i> Limpar Filtros
    </a>
    {% endif %}
</div>
{% endmacro %}

{% macro empty_permission_denied(message='', back_url='') %}
    {#
        Estado vazio para acesso negado

        Args:
            message: Mensagem personalizada (opcional)
            back_url: URL para voltar (opcional)

        Exemplo:
            {{ empty_permission_denied('Você não tem permissão para visualizar estes dados.', '/home') }}
    #}
<div class="alert alert-danger" role="alert">
    <h4 class="alert-heading">
        <i class="bi bi-shield-exclamation"></i> Acesso Negado
    </h4>
    <p class="mb-0">
        {% if message %}
            {{ message }}
        {% else %}
            Você não possui permissão para acessar este conteúdo.
        {% endif %}
    </p>
    {% if back_url %}
    <hr>
    <a href="{{ back_url }}" class="btn btn-danger">
        <i class="bi bi-arrow-left"></i> Voltar
    </a>
    {% endif %}
</div>
{% endmacro %}
